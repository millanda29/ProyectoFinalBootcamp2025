# TravelMate API - Asistente Inteligente de Viajes

API backend para TravelMate, una plataforma web con chatbot de IA para planificaci√≥n de viajes que sugiere itinerarios, calcula presupuestos y genera reportes personalizados.

## üîß Tecnolog√≠as Utilizadas

- **Node.js v16+** con Express.js
- **MongoDB** con Mongoose ODM
- **OpenAI API (GPT-4o-mini)** para el chatbot inteligente
- **JWT** para autenticaci√≥n y autorizaci√≥n
- **Puppeteer** para generaci√≥n de PDFs
- **Winston** para logging avanzado
- **Bcrypt** para hashing seguro de contrase√±as
- **Node-cron** para tareas programadas
- **Express-list-endpoints** para documentaci√≥n autom√°tica

## üìã Funcionalidades Implementadas

### ‚úÖ Sistema de Autenticaci√≥n y Seguridad
- ‚úÖ Registro y login de usuarios con validaci√≥n
- ‚úÖ Autenticaci√≥n JWT con refresh tokens seguros
- ‚úÖ Middleware de autorizaci√≥n basado en roles
- ‚úÖ Hashing de contrase√±as con salt rounds
- ‚úÖ Protecci√≥n CORS configurada
- ‚úÖ Manejo centralizado de errores

### ‚úÖ Gesti√≥n Avanzada de Usuarios
- ‚úÖ Panel de administraci√≥n completo (CRUD usuarios)
- ‚úÖ Roles de usuario (admin/traveler) con permisos diferenciados
- ‚úÖ **Eliminaci√≥n l√≥gica** con campos isDeleted, deletedAt, deletedBy
- ‚úÖ Restauraci√≥n de usuarios eliminados (admin only)
- ‚úÖ Eliminaci√≥n permanente (admin only)
- ‚úÖ Gesti√≥n de perfiles y cambio de contrase√±as
- ‚úÖ Estad√≠sticas de usuarios del sistema

### ‚úÖ ChatBot IA Avanzado y Gesti√≥n de Viajes
- ‚úÖ Integraci√≥n con OpenAI GPT-4o-mini
- ‚úÖ Generaci√≥n inteligente de itinerarios personalizados
- ‚úÖ Chat interactivo con contexto de viaje persistente
- ‚úÖ CRUD completo de trips/viajes con eliminaci√≥n l√≥gica
- ‚úÖ Gesti√≥n de actividades categorizadas por d√≠a
- ‚úÖ Administraci√≥n de viajes eliminados (restaurar/eliminar permanente)

### ‚úÖ Sistema de Presupuestos y Reportes
- ‚úÖ C√°lculo detallado de costos (alojamiento, transporte, actividades)
- ‚úÖ Generaci√≥n de reportes PDF con Puppeteer
- ‚úÖ Estimaciones autom√°ticas de presupuesto con IA
- ‚úÖ Exportaci√≥n completa de itinerarios
- ‚úÖ Almacenamiento persistente de reportes generados

### ‚úÖ Funciones Administrativas Avanzadas
- ‚úÖ Panel de control administrativo completo
- ‚úÖ Gesti√≥n de usuarios eliminados y restauraci√≥n
- ‚úÖ Eliminaci√≥n permanente de datos (irreversible)
- ‚úÖ Estad√≠sticas del sistema en tiempo real
- ‚úÖ Supervisi√≥n de todos los viajes del sistema

## üõ†Ô∏è Instalaci√≥n y Configuraci√≥n

### Prerrequisitos
```bash
- Node.js (v16 o superior)
- MongoDB (local o Atlas)
- NPM o Yarn
- Cuenta de OpenAI con API Key
```

### Instalaci√≥n
```bash
# Clonar el repositorio
git clone <repository-url>
cd server

# Instalar dependencias
npm install

# Configurar variables de entorno
cp .env.example .env
```

### Variables de Entorno (.env)
```env
PORT=3000
MONGODB_URI=mongodb://localhost:27017/travelmate
JWT_SECRET=your-super-secret-jwt-key-with-at-least-32-characters
JWT_REFRESH_SECRET=your-refresh-secret-key-with-at-least-32-characters
OPENAI_API_KEY=sk-your-openai-api-key-here
CORS_ORIGIN=http://localhost:5173
NODE_ENV=development
```

### Ejecutar la aplicaci√≥n
```bash
# Desarrollo con recarga autom√°tica
npm run dev

# Producci√≥n
npm start
```

## üìö API Endpoints Completos

### üîê Autenticaci√≥n (`/api/auth`)

| M√©todo | Endpoint | Descripci√≥n | Autenticaci√≥n |
|--------|----------|-------------|---------------|
| POST | `/register` | Registrar nuevo usuario | ‚ùå |
| POST | `/login` | Iniciar sesi√≥n | ‚ùå |
| POST | `/refresh` | Renovar token de acceso | ‚ùå |
| POST | `/logout` | Cerrar sesi√≥n (invalidar refresh token) | ‚ùå |
| PUT | `/change-password` | Cambiar contrase√±a con token | ‚úÖ |

### üë§ Usuarios (`/api/users`)

#### Endpoints de Usuario Regular
| M√©todo | Endpoint | Descripci√≥n | Autenticaci√≥n |
|--------|----------|-------------|---------------|
| GET | `/me` | Obtener perfil propio | ‚úÖ |
| PUT | `/me` | Actualizar perfil propio | ‚úÖ |
| GET | `/me/trips` | Historial de viajes propios | ‚úÖ |
| DELETE | `/me` | Eliminar cuenta propia (l√≥gico) | ‚úÖ |

#### Endpoints de Administrador
| M√©todo | Endpoint | Descripci√≥n | Rol |
|--------|----------|-------------|-----|
| GET | `/admin/stats` | Estad√≠sticas del sistema | Admin |
| GET | `/admin/all` | Listar todos los usuarios activos | Admin |
| POST | `/admin/create` | Crear nuevo usuario | Admin |
| GET | `/admin/:id` | Obtener usuario por ID | Admin |
| PUT | `/admin/:id` | Actualizar usuario espec√≠fico | Admin |
| DELETE | `/admin/:id` | Eliminar usuario (l√≥gico) | Admin |
| PUT | `/admin/:id/reset-password` | Resetear contrase√±a de usuario | Admin |
| GET | `/admin/deleted` | Listar usuarios eliminados | Admin |
| PUT | `/admin/:id/restore` | Restaurar usuario eliminado | Admin |
| DELETE | `/admin/:id/permanent` | Eliminar usuario permanentemente | Admin |

### üß≥ Viajes (`/api/trips`)

#### Endpoints de Usuario Regular
| M√©todo | Endpoint | Descripci√≥n | Autenticaci√≥n |
|--------|----------|-------------|---------------|
| GET | `/my` | Mis viajes activos | ‚úÖ |
| POST | `/` | Crear nuevo viaje | ‚úÖ |
| GET | `/:id` | Obtener viaje por ID | ‚úÖ |
| PUT | `/:id` | Actualizar viaje | ‚úÖ |
| DELETE | `/:id` | Eliminar viaje (l√≥gico) | ‚úÖ |
| PUT | `/:id/costs` | Agregar/actualizar costos | ‚úÖ |
| PUT | `/:id/itinerary` | Actualizar itinerario | ‚úÖ |
| POST | `/:id/report` | Generar reporte PDF | ‚úÖ |
| GET | `/:id/reports` | Listar reportes del viaje | ‚úÖ |

#### Endpoints de Administrador
| M√©todo | Endpoint | Descripci√≥n | Rol |
|--------|----------|-------------|-----|
| GET | `/` | Todos los viajes activos del sistema | Admin |
| GET | `/deleted` | Todos los viajes eliminados | Admin |
| PUT | `/:id/restore` | Restaurar viaje eliminado | Admin |
| DELETE | `/:id/permanent` | Eliminar viaje permanentemente | Admin |

### ü§ñ ChatBot IA (`/api/chat`)

| M√©todo | Endpoint | Descripci√≥n | Autenticaci√≥n |
|--------|----------|-------------|---------------|
| POST | `/itinerary` | Generar itinerario b√°sico con IA | ‚úÖ |
| POST | `/trip/:tripId/itinerary` | Generar itinerario para trip espec√≠fico | ‚úÖ |
| POST | `/assistant` | Chat con asistente de viajes | ‚úÖ |

## üìä Modelos de Datos Actualizados

### Usuario
```javascript
{
  email: String (√∫nico, requerido),
  passwordHash: String (requerido),
  fullName: String (requerido),
  avatarUrl: String,
  dateOfBirth: Date,
  location: String,
  bio: String,
  preferences: {
    currency: String (default: 'USD'),
    language: String (default: 'es'),
    notifications: Boolean (default: true)
  },
  roles: [String] (default: ['traveler']),
  isActive: Boolean (default: true),
  lastLogin: Date,
  loginAttempts: Number (default: 0),
  createdTrips: [ObjectId] (ref: Trip),
  statistics: {
    totalTrips: Number (default: 0),
    totalDaysTravel: Number (default: 0),
    totalSpent: Number (default: 0),
    countriesVisited: [String]
  },
  // Campos de eliminaci√≥n l√≥gica
  isDeleted: Boolean (default: false),
  deletedAt: Date,
  deletedBy: ObjectId (ref: User),
  timestamps: true
}
```

### Trip (Viaje)
```javascript
{
  userId: ObjectId (ref: User, requerido),
  title: String (requerido),
  destination: String (requerido),
  startDate: Date (requerido),
  endDate: Date (requerido),
  partySize: Number (default: 1),
  status: String (enum: planned/ongoing/completed, default: planned),
  description: String,
  estimatedBudget: Number,
  actualBudget: Number,
  currency: String (default: USD),
  itinerary: [DaySchema],
  costs: [CostSchema],
  aiConversations: [ConversationSchema],
  reports: [ReportSchema],
  tags: [String],
  // Campos de eliminaci√≥n l√≥gica
  isDeleted: Boolean (default: false),
  deletedAt: Date,
  deletedBy: ObjectId (ref: User),
  timestamps: true
}
```

### Esquemas Anidados

#### Day (D√≠a del Itinerario)
```javascript
{
  dayNumber: Number (requerido),
  date: Date,
  notes: String,
  activities: [ActivitySchema]
}
```

#### Activity (Actividad)
```javascript
{
  title: String (requerido),
  description: String,
  category: String (enum: sightseeing/restaurant/transport/lodging/entertainment/other),
  startTime: String,
  endTime: String,
  location: String,
  address: String,
  cost: Number,
  currency: String,
  externalRef: String,
  rating: Number (1-5),
  notes: String
}
```

#### Cost (Costo)
```javascript
{
  type: String (enum: lodging/transport/activity/food/shopping/other),
  label: String (requerido),
  description: String,
  currency: String (default: USD),
  amount: Number (requerido),
  quantity: Number (default: 1),
  date: Date,
  category: String,
  isEstimated: Boolean (default: false)
}
```

#### Conversation (Conversaci√≥n con IA)
```javascript
{
  timestamp: Date (default: Date.now),
  userMessage: String (requerido),
  aiResponse: String (requerido),
  context: String,
  tokens: Number
}
```

#### Report (Reporte)
```javascript
{
  fileName: String (requerido),
  downloadUrl: String (requerido),
  generatedAt: Date (default: Date.now),
  fileSize: Number,
  type: String (default: 'pdf')
}
```

### RefreshToken
```javascript
{
  token: String (√∫nico, requerido),
  userId: ObjectId (ref: User, requerido),
  expiresAt: Date (requerido),
  isRevoked: Boolean (default: false),
  createdAt: Date (default: Date.now)
}
```

## üîß Ejemplos de Uso Detallados

### Registro y Autenticaci√≥n
```bash
# Registro de usuario
POST /api/auth/register
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "SecurePassword123!",
  "fullName": "Juan P√©rez",
  "dateOfBirth": "1990-05-15",
  "location": "Madrid, Espa√±a"
}

# Respuesta
{
  "success": true,
  "data": {
    "user": {
      "id": "674a1b2c3d4e5f6789abcdef",
      "email": "user@example.com",
      "fullName": "Juan P√©rez",
      "roles": ["traveler"]
    },
    "tokens": {
      "accessToken": "eyJhbGciOiJIUzI1NiIs...",
      "refreshToken": "eyJhbGciOiJIUzI1NiIs..."
    }
  }
}
```

### Crear Viaje Completo
```bash
POST /api/trips
Authorization: Bearer <token>
Content-Type: application/json

{
  "title": "Vacaciones en Par√≠s",
  "destination": "Par√≠s, Francia",
  "startDate": "2024-06-15",
  "endDate": "2024-06-20",
  "partySize": 2,
  "description": "Viaje rom√°ntico por Par√≠s",
  "estimatedBudget": 2500,
  "currency": "EUR",
  "tags": ["romantic", "culture", "gastronomy"]
}
```

### Generar Itinerario con IA
```bash
POST /api/chat/trip/674a1b2c3d4e5f6789abcdef/itinerary
Authorization: Bearer <token>
Content-Type: application/json

{
  "preferences": {
    "interests": ["arte", "gastronom√≠a", "historia"],
    "budget": "medio",
    "style": "cultural"
  }
}

# Respuesta
{
  "success": true,
  "data": {
    "itinerary": [
      {
        "dayNumber": 1,
        "date": "2024-06-15",
        "activities": [
          {
            "title": "Visita a la Torre Eiffel",
            "category": "sightseeing",
            "startTime": "09:00",
            "endTime": "11:00",
            "location": "Torre Eiffel",
            "cost": 25,
            "currency": "EUR"
          }
        ]
      }
    ]
  }
}
```

### Administraci√≥n de Usuarios Eliminados
```bash
# Listar usuarios eliminados (admin only)
GET /api/users/admin/deleted
Authorization: Bearer <admin-token>

# Restaurar usuario eliminado
PUT /api/users/admin/674a1b2c3d4e5f6789abcdef/restore
Authorization: Bearer <admin-token>

# Eliminar permanentemente
DELETE /api/users/admin/674a1b2c3d4e5f6789abcdef/permanent
Authorization: Bearer <admin-token>
```

### Agregar Costos
```bash
PUT /api/trips/60f7b3b4d1a2c3e4f5g6h7i8/costs
Authorization: Bearer <token>
Content-Type: application/json

{
  "costs": [
    {
      "type": "lodging",
      "label": "Hotel Notre-Dame",
      "amount": 120,
      "quantity": 5,
      "currency": "USD"
    },
    {
      "type": "transport",
      "label": "Metro passes",
      "amount": 15,
      "quantity": 2,
      "currency": "USD"
    }
  ]
}
```

### Generar Reporte PDF
```bash
POST /api/trips/60f7b3b4d1a2c3e4f5g6h7i8/report
Authorization: Bearer <token>

Response:
{
  "success": true,
  "data": {
    "downloadUrl": "/reports/trip-60f7b3b4d1a2c3e4f5g6h7i8-1640995200000.pdf",
    "fileName": "trip-60f7b3b4d1a2c3e4f5g6h7i8-1640995200000.pdf",
    "generatedAt": "2024-01-01T10:00:00.000Z"
  },
  "message": "Reporte PDF generado exitosamente"
}
```

## üß™ Caracter√≠sticas del ChatBot IA

### Generaci√≥n Inteligente de Itinerarios
- Sugerencias personalizadas basadas en destino, fechas y preferencias
- Actividades categorizadas con horarios optimizados
- Estimaci√≥n autom√°tica y detallada de costos
- Consideraci√≥n de factores como clima, eventos locales y presupuesto
- Integraci√≥n con datos hist√≥ricos de viajes anteriores

### Chat Interactivo Avanzado
- Respuestas contextuales sobre el viaje espec√≠fico
- Sugerencias de modificaciones al itinerario en tiempo real
- Consejos de viaje personalizados basados en el perfil del usuario
- Capacidad de recordar conversaciones anteriores
- Estimaciones de presupuesto din√°micas

### Funciones de IA Espec√≠ficas
- An√°lisis de patrones de viaje del usuario
- Recomendaciones basadas en historial y preferencias
- Optimizaci√≥n de rutas y tiempos
- Alertas de presupuesto y gastos
- Sugerencias de actividades alternativas

## üõ°Ô∏è Sistema de Eliminaci√≥n L√≥gica

### Funcionamiento
- **Eliminaci√≥n L√≥gica**: Los registros no se eliminan f√≠sicamente de la base de datos
- **Campos de Control**: `isDeleted`, `deletedAt`, `deletedBy` en todos los modelos principales
- **Filtrado Autom√°tico**: Middleware de Mongoose oculta autom√°ticamente registros eliminados
- **Trazabilidad**: Registro completo de qui√©n y cu√°ndo elimin√≥ cada elemento

### Beneficios
- ‚úÖ Recuperaci√≥n de datos accidental
- ‚úÖ Auditor√≠a completa de eliminaciones
- ‚úÖ An√°lisis hist√≥rico de datos
- ‚úÖ Cumplimiento de regulaciones de retenci√≥n de datos
- ‚úÖ Funcionalidad de "papelera de reciclaje"

### Administraci√≥n de Datos Eliminados
- **Solo Administradores** pueden ver datos eliminados
- **Restauraci√≥n** de usuarios y viajes con un clic
- **Eliminaci√≥n Permanente** para limpiar datos definitivamente
- **Reportes** de elementos eliminados por fecha y usuario

## üìà Sistema de Roles y Permisos Avanzado

### Traveler (Usuario Regular)
- ‚úÖ Gesti√≥n completa de su perfil personal
- ‚úÖ Crear, editar y eliminar sus propios viajes
- ‚úÖ Usar todas las funciones del chatbot IA
- ‚úÖ Generar y descargar reportes de sus viajes
- ‚úÖ Eliminar su propia cuenta (eliminaci√≥n l√≥gica)
- ‚ùå Ver datos de otros usuarios
- ‚ùå Funciones administrativas

### Admin (Administrador)
- ‚úÖ **Todas las funciones de Traveler**
- ‚úÖ Ver y gestionar todos los usuarios del sistema
- ‚úÖ Ver y gestionar todos los viajes del sistema
- ‚úÖ Crear usuarios directamente
- ‚úÖ Resetear contrase√±as de cualquier usuario
- ‚úÖ Ver estad√≠sticas completas del sistema
- ‚úÖ **Gestionar datos eliminados** (ver, restaurar, eliminar permanente)
- ‚úÖ Acceso a funciones de auditor√≠a y control

## ÔøΩ Seguridad Implementada

### Autenticaci√≥n
- **JWT con tiempos de vida cortos** (15 minutos para access token)
- **Refresh tokens seguros** con rotaci√≥n autom√°tica
- **Invalidaci√≥n de tokens** en logout
- **Protecci√≥n contra ataques de fuerza bruta**

### Autorizaci√≥n
- **Middleware de roles** granular
- **Validaci√≥n de propietario** para recursos personales
- **Protecci√≥n de endpoints administrativos**
- **Verificaci√≥n de permisos en tiempo real**

### Datos
- **Hashing de contrase√±as** con bcrypt y salt rounds altos
- **Validaci√≥n de entrada** en todos los endpoints
- **Sanitizaci√≥n de datos** antes de almacenamiento
- **Protecci√≥n CORS** configurada espec√≠ficamente

### Auditor√≠a
- **Logging completo** de todas las operaciones
- **Registro de eliminaciones** con usuario y timestamp
- **Trazabilidad de cambios** en datos cr√≠ticos
- **Monitoreo de intentos de acceso** fallidos

## üìÅ Estructura del Proyecto Actualizada

```
server/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ auth/                     # Sistema de autenticaci√≥n
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ authController.js     # Controlador de autenticaci√≥n
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ authMiddleware.js     # Middleware JWT y autorizaci√≥n
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ authRouter.js         # Rutas de autenticaci√≥n
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ authService.js        # L√≥gica de negocio de auth
‚îÇ   ‚îú‚îÄ‚îÄ controllers/              # Controladores principales
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chatController.js     # Control del chatbot IA
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tripController.js     # Control de viajes
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ userController.js     # Control de usuarios
‚îÇ   ‚îú‚îÄ‚îÄ middlewares/              # Middlewares personalizados
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ errorHandler.js       # Manejo centralizado de errores
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ isAdmin.js            # Middleware de autorizaci√≥n admin
‚îÇ   ‚îú‚îÄ‚îÄ models/                   # Modelos de MongoDB
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RefreshToken.js       # Modelo de refresh tokens
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Trip.js               # Modelo de viajes con soft delete
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ User.js               # Modelo de usuarios con soft delete
‚îÇ   ‚îú‚îÄ‚îÄ routers/                  # Definici√≥n de rutas
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chatRouter.js         # Rutas del chatbot
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.js              # Router principal
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tripRouter.js         # Rutas de viajes
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ userRouter.js         # Rutas de usuarios
‚îÇ   ‚îú‚îÄ‚îÄ services/                 # L√≥gica de negocio
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chatService.js        # Servicios del chatbot IA
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ reportService.js      # Generaci√≥n de reportes PDF
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tripService.js        # Servicios de viajes
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ userService.js        # Servicios de usuarios
‚îÇ   ‚îú‚îÄ‚îÄ tasks/                    # Tareas programadas
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ scheduledDeletions.js # Limpieza autom√°tica de datos
‚îÇ   ‚îú‚îÄ‚îÄ utils/                    # Utilidades
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ generateToken.js      # Generaci√≥n de tokens JWT
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hashPassword.js       # Hashing de contrase√±as
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logger.js             # Configuraci√≥n de Winston
‚îÇ   ‚îú‚îÄ‚îÄ app.js                    # Configuraci√≥n de Express
‚îÇ   ‚îî‚îÄ‚îÄ seed.js                   # Datos de prueba y inicializaci√≥n
‚îú‚îÄ‚îÄ reports/                      # PDFs generados (persistentes)
‚îú‚îÄ‚îÄ api-endpoints.json            # Documentaci√≥n completa de API
‚îú‚îÄ‚îÄ ENDPOINTS-SUMMARY.md          # Resumen de endpoints
‚îú‚îÄ‚îÄ index.js                      # Punto de entrada principal
‚îú‚îÄ‚îÄ package.json                  # Dependencias y scripts
‚îî‚îÄ‚îÄ README.md                     # Esta documentaci√≥n
```

## üöÄ Estado Actual del Desarrollo

### ‚úÖ Completado (100%)
- [x] **Sistema de autenticaci√≥n JWT completo** con refresh tokens
- [x] **Gesti√≥n avanzada de usuarios** con roles y permisos
- [x] **Eliminaci√≥n l√≥gica** implementada en todos los modelos
- [x] **Panel de administraci√≥n** completo con gesti√≥n de eliminados
- [x] **ChatBot IA integrado** con OpenAI GPT-4o-mini
- [x] **CRUD completo de viajes** con funciones avanzadas
- [x] **Sistema de costos y presupuestos** detallado
- [x] **Generaci√≥n de reportes PDF** con Puppeteer
- [x] **API RESTful** completamente documentada
- [x] **Logging y manejo de errores** centralizado
- [x] **Seguridad avanzada** con validaciones y protecciones

### üéØ Criterios de Aceptaci√≥n Cumplidos
- ‚úÖ El sistema genera itinerarios IA en menos de 5 segundos
- ‚úÖ El ChatBot responde con contexto en tiempo real
- ‚úÖ Los reportes se generan y almacenan correctamente
- ‚úÖ Arquitectura MERN Stack completamente implementada
- ‚úÖ Roles y permisos funcionando correctamente
- ‚úÖ Eliminaci√≥n l√≥gica funcional con administraci√≥n completa
- ‚úÖ Todas las validaciones de seguridad implementadas
- ‚úÖ API completamente documentada y coherente

## ÔøΩ Estad√≠sticas del Proyecto

### Dependencias
```json
{
  "dependencies": {
    "bcrypt": "^6.0.0",
    "bcryptjs": "^3.0.2",
    "cookie-parser": "^1.4.7",
    "cors": "^2.8.5",
    "dotenv": "^17.2.1",
    "express": "^4.21.2",
    "express-list-endpoints": "^7.1.1",
    "html2canvas": "^1.4.1",
    "jsonwebtoken": "^9.0.2",
    "jspdf": "^3.0.2",
    "mongoose": "^8.18.0",
    "morgan": "^1.10.1",
    "node-cron": "^4.2.1",
    "openai": "^5.19.1",
    "puppeteer": "^24.19.0",
    "winston": "^3.17.0"
  },
  "devDependencies": {
    "nodemon": "^3.0.1"
  }
}
```

### Endpoints Totales
- **Autenticaci√≥n**: 5 endpoints
- **Usuarios**: 12 endpoints (6 regulares + 6 admin)
- **Viajes**: 12 endpoints (8 regulares + 4 admin)
- **ChatBot**: 3 endpoints
- **Total**: 32 endpoints funcionales

## üîÑ Scripts NPM

```json
{
  "start": "node index.js",      // Producci√≥n
  "dev": "nodemon index.js"      // Desarrollo con recarga autom√°tica
}
```

### Comandos de Ejecuci√≥n

```bash
# Instalar dependencias
npm install

# Desarrollo (recomendado)
npm run dev

# Producci√≥n
npm start
```

## üåê Configuraci√≥n de Producci√≥n

### Variables de Entorno Requeridas
```env
PORT=3000
MONGODB_URI=mongodb+srv://user:pass@cluster.mongodb.net/travelmate
JWT_SECRET=super-secret-key-min-32-characters-for-production
JWT_REFRESH_SECRET=another-super-secret-key-min-32-characters
OPENAI_API_KEY=sk-your-production-openai-key
CORS_ORIGIN=https://your-frontend-domain.com
NODE_ENV=production
```

### Consideraciones de Deployment
- **MongoDB Atlas** recomendado para producci√≥n
- **Heroku, Railway, o AWS** para hosting del backend
- **Variables de entorno** configuradas en el servicio de hosting
- **CORS** configurado para el dominio del frontend
- **HTTPS** obligatorio en producci√≥n

## üë• Equipo de Desarrollo

- **Backend Developer**: API Node.js, integraci√≥n IA, bases de datos
- **Frontend Developer**: Interfaz React, integraci√≥n con API
- **Product Owner**: Requerimientos, visi√≥n del producto, priorizaci√≥n
- **Scrum Master / QA**: Metodolog√≠a √°gil, testing, calidad del software

---

## üìñ Documentaci√≥n general

* Para detalles de la instalaci√≥n y ejecuci√≥n completa del proyecto, revisa el [README principal](../README.md).
* Para detalles del **frontend**, revisa el [README del client](../client/README.md).

---

## üìû Soporte y Documentaci√≥n

- **API Documentation**: `api-endpoints.json` (completa y actualizada)
- **Endpoints Summary**: `ENDPOINTS-SUMMARY.md`
- **Logs**: Archivos `combined.log` y `error.log` con Winston
- **Code Structure**: Arquitectura modular y bien documentada

---

**TravelMate API v1.0** - Desarrollado con ‚ù§Ô∏è usando Node.js, MongoDB y OpenAI



